import{getJson as t,getLanguage as e}from"./common.js";const n=new URLSearchParams(document.location.search);let o=n.get("lang")??"en";const c=e(o);o=c.lang??o;const r="true"===n.get("rand"),l=t("questions-"+o);for(const t of Object.keys(c.quiztext.text))document.getElementById(t).textContent=c.quiztext.text[t];document.title=c.quiztext.text.title;const a=document.getElementById("buttonholder"),i=document.getElementById("questiontext"),d=document.getElementById("question_number");for(const[t,e]of c.quiztext.buttons.entries()){const n=document.createElement("button");n.textContent=e.text,n.style.backgroundColor=e.color,n.addEventListener("click",(()=>m(t))),a.appendChild(n)}document.getElementById("back_button").addEventListener("click",(()=>(u--,void(l[u]?h():window.history.back()))));const f=new Array(l.length),s=new Array(l[0].effect.length).fill(0);for(const t of l)t.effect.forEach(((t,e)=>s[e]+=Math.abs(t)));r&&(l.forEach(((t,e)=>t.ogIndex=e)),l.sort((()=>.5-Math.random())));let u=0;function m(t){f[u]=t,u++,l[u]?h():function(){const t=new Array(l[0].effect.length).fill(0),e=new Array(l[0].effect.length).fill(0),n=[1,.5,0,-.5,-1];let c=new Array(f.length);void 0!==l[0]?.ogIndex?l.forEach(((t,e)=>c[t.ogIndex]=f[e])):c=f;c.forEach(((e,o)=>l[o].effect.forEach(((o,c)=>t[c]+=n[e]*o)))),s.forEach(((n,o)=>e[o]=Math.round((n+t[o])/(2*n)*1e3)/10)),window.location.href="results.html?lang="+o+"&score="+e.map((t=>t.toFixed(1))).join(",")}()}function h(){i.textContent=l[u].text,d.textContent=`${c.quiztext.question} ${u+1} ${c.quiztext.of} ${l.length}`}h();
//# sourceMappingURL=quiz.js.map