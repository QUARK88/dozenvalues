export function getJson(t){const e=new XMLHttpRequest;return e.open("GET","./dist/json/"+t+".json",!1),e.send(null),JSON.parse(e.responseText)}export function getLanguage(t){try{return getJson("ui-"+t)}catch(e){console.error(e),alert(t+" is not a valid language")}return getLanguage("en")}export function b64enc(t){const e=Uint16Array.from({length:t.length},((e,i)=>t.charCodeAt(i))),i=new Uint8Array(e.buffer);let s="";return i.forEach((t=>{s+=String.fromCharCode(t)})),btoa(s)}export function b64dec(t){const e=atob(t),i=Uint8Array.from({length:e.length},((t,i)=>e.charCodeAt(i))),s=new Uint16Array(i.buffer);let o="";return s.forEach((t=>{o+=String.fromCharCode(t)})),o}export function matchAxisTier(t,e){if(t<0||t>100||Number.isNaN(t))throw new Error(`Invalid score: ${t}%`);const i=[10,25,45,55,75,90,100];for(let s=0;s<i.length;s++){const o=i[s];if(t>=(i[s-1]??0)&&t<=o)return e[s]}throw new Error("Missing label")}export function orderScores(t,e,i){const s=t.length;for(const o of i){let i=0;for(let n=0;n<s;n++){const s=Math.abs(t[n]-o.stats[n]);i+=e[n]*Math.pow(s/100,3)}i/=s,o.score=i}return i.sort(((t,e)=>t.score-e.score)),i}export class Canvas{canvas;ctx;font;titleFont;bgColor;fgColor;constructor(t,e,i,s,o,n,l){this.canvas=t,this.canvas.width=e,this.canvas.height=i,this.ctx=this.canvas.getContext("2d"),this.font=s,this.titleFont=o,this.bgColor=l,this.fgColor=n,this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,e,i)}setFontsize(t){this.ctx.font=t.toFixed(0)+"px "+this.font}drawHeader(t,e,i,s){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,180),this.ctx.fillStyle=this.fgColor,this.ctx.textAlign="start",this.ctx.font="64px "+this.titleFont,this.ctx.fillText(t,32,80,490),this.ctx.textAlign="end",this.setFontsize(16),this.ctx.fillText(e,768,48),this.ctx.fillText(i,768,80),this.ctx.textAlign="left",this.setFontsize(48),this.ctx.fillText(s,32,144,this.canvas.width-64)}drawBar(t,e,i,s){const o=112*t,n=o+160,l=o+208,r=o+214,c=o+252,h=o+192;this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(128,n,544,112),this.ctx.fillStyle="black",this.ctx.fillRect(128,l,544,64),this.ctx.fillStyle=e[0];const a=5.44*i-3;this.ctx.fillRect(128,r,a,52),this.ctx.fillStyle=e[1];const x=403-5.44*(50-i),f=5.44*(100-i)-3;if(this.ctx.fillRect(x,r,f,52),this.setFontsize(32),this.ctx.fillStyle="#080808",i>20){this.ctx.textAlign="left";const t=i.toFixed(1)+"%";this.ctx.fillText(t,136,c)}if(i<80){this.ctx.textAlign="right";const t=(100-i).toFixed(1)+"%";this.ctx.fillText(t,664,c)}this.ctx.fillStyle=this.fgColor,this.ctx.textAlign="center",this.setFontsize(24),this.ctx.fillText(s,400,h)}drawImages(t,e){t.forEach(((t,i)=>{const s=192+112*e,o=32+640*i,n=new Image;n.src=t,n.addEventListener("load",(()=>this.ctx.drawImage(n,o,s,96,96)))}))}}